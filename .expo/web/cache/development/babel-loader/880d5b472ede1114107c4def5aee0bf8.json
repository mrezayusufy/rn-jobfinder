{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function get() {\n        return m[k];\n      }\n    };\n  }\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  __setModuleDefault(result, mod);\n  return result;\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ErrorToastContainer = void 0;\nvar react_1 = __importStar(require(\"react\"));\nvar react_native_1 = require(\"react-native-web/dist/index\");\nvar ErrorToast_1 = require(\"./ErrorToast\");\nvar LogBoxData = __importStar(require(\"../Data/LogBoxData\"));\nvar LogContext_1 = require(\"../Data/LogContext\");\nvar useRejectionHandler_1 = require(\"../useRejectionHandler\");\nfunction ErrorToastContainer() {\n  (0, useRejectionHandler_1.useRejectionHandler)();\n  var _ref = (0, LogContext_1.useLogs)(),\n    logs = _ref.logs,\n    isDisabled = _ref.isDisabled;\n  if (!logs.length || isDisabled) {\n    return null;\n  }\n  return react_1.default.createElement(ErrorToastStack, {\n    logs: logs\n  });\n}\nexports.ErrorToastContainer = ErrorToastContainer;\nfunction ErrorToastStack(_ref2) {\n  var logs = _ref2.logs;\n  var onDismissWarns = (0, react_1.useCallback)(function () {\n    LogBoxData.clearWarnings();\n  }, []);\n  var onDismissErrors = (0, react_1.useCallback)(function () {\n    LogBoxData.clearErrors();\n  }, []);\n  var setSelectedLog = (0, react_1.useCallback)(function (index) {\n    LogBoxData.setSelectedLog(index);\n  }, []);\n  function openLog(log) {\n    var index = logs.length - 1;\n    while (index > 0 && logs[index] !== log) {\n      index -= 1;\n    }\n    setSelectedLog(index);\n  }\n  var warnings = (0, react_1.useMemo)(function () {\n    return logs.filter(function (log) {\n      return log.level === \"warn\";\n    });\n  }, [logs]);\n  var errors = (0, react_1.useMemo)(function () {\n    return logs.filter(function (log) {\n      return log.level === \"error\" || log.level === \"fatal\";\n    });\n  }, [logs]);\n  return react_1.default.createElement(react_native_1.View, {\n    style: styles.list\n  }, warnings.length > 0 && react_1.default.createElement(ErrorToast_1.ErrorToast, {\n    log: warnings[warnings.length - 1],\n    level: \"warn\",\n    totalLogCount: warnings.length,\n    onPressOpen: function onPressOpen() {\n      return openLog(warnings[warnings.length - 1]);\n    },\n    onPressDismiss: onDismissWarns\n  }), errors.length > 0 && react_1.default.createElement(ErrorToast_1.ErrorToast, {\n    log: errors[errors.length - 1],\n    level: \"error\",\n    totalLogCount: errors.length,\n    onPressOpen: function onPressOpen() {\n      return openLog(errors[errors.length - 1]);\n    },\n    onPressDismiss: onDismissErrors\n  }));\n}\nvar styles = react_native_1.StyleSheet.create({\n  list: {\n    bottom: 6,\n    left: 10,\n    right: 10,\n    position: \"absolute\",\n    maxWidth: 320\n  }\n});\nexports.default = LogBoxData.withSubscription(ErrorToastContainer);","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA;AAAoD;AAGpD;AACA;AAEA;AACA;AAEA,SAAgBA,mBAAmB;EACjC,6CAAmB,GAAE;EACrB,WAA6B,wBAAO,GAAE;IAA9BC,IAAI,QAAJA,IAAI;IAAEC,UAAU,QAAVA,UAAU;EACxB,IAAI,CAACD,IAAI,CAACE,MAAM,IAAID,UAAU,EAAE;IAC9B,OAAO,IAAI;;EAEb,OAAOE,8BAACC,eAAe;IAACJ,IAAI,EAAEA;EAAI,EAAI;AACxC;AAPAK;AASA,SAASD,eAAe,QAAgC;EAAA,IAA7BJ,IAAI,SAAJA,IAAI;EAC7B,IAAMM,cAAc,GAAG,uBAAW,EAAC,YAAK;IACtCC,UAAU,CAACC,aAAa,EAAE;EAC5B,CAAC,EAAE,EAAE,CAAC;EAEN,IAAMC,eAAe,GAAG,uBAAW,EAAC,YAAK;IACvCF,UAAU,CAACG,WAAW,EAAE;EAC1B,CAAC,EAAE,EAAE,CAAC;EAEN,IAAMC,cAAc,GAAG,uBAAW,EAAC,UAACC,KAAa,EAAU;IACzDL,UAAU,CAACI,cAAc,CAACC,KAAK,CAAC;EAClC,CAAC,EAAE,EAAE,CAAC;EAEN,SAASC,OAAO,CAACC,GAAc;IAC7B,IAAIF,KAAK,GAAGZ,IAAI,CAACE,MAAM,GAAG,CAAC;IAG3B,OAAOU,KAAK,GAAG,CAAC,IAAIZ,IAAI,CAACY,KAAK,CAAC,KAAKE,GAAG,EAAE;MACvCF,KAAK,IAAI,CAAC;;IAEZD,cAAc,CAACC,KAAK,CAAC;EACvB;EAEA,IAAMG,QAAQ,GAAG,mBAAO,EACtB;IAAA,OAAMf,IAAI,CAACgB,MAAM,CAAC,UAACF,GAAG;MAAA,OAAKA,GAAG,CAACG,KAAK,KAAK,MAAM;IAAA,EAAC;EAAA,GAChD,CAACjB,IAAI,CAAC,CACP;EAED,IAAMkB,MAAM,GAAG,mBAAO,EACpB;IAAA,OAAMlB,IAAI,CAACgB,MAAM,CAAC,UAACF,GAAG;MAAA,OAAKA,GAAG,CAACG,KAAK,KAAK,OAAO,IAAIH,GAAG,CAACG,KAAK,KAAK,OAAO;IAAA,EAAC;EAAA,GAC1E,CAACjB,IAAI,CAAC,CACP;EAED,OACEG,8BAACgB,mBAAI;IAACC,KAAK,EAAEC,MAAM,CAACC;EAAI,GACrBP,QAAQ,CAACb,MAAM,GAAG,CAAC,IAClBC,8BAACoB,uBAAU;IACTT,GAAG,EAAEC,QAAQ,CAACA,QAAQ,CAACb,MAAM,GAAG,CAAC,CAAC;IAClCe,KAAK,EAAC,MAAM;IACZO,aAAa,EAAET,QAAQ,CAACb,MAAM;IAC9BuB,WAAW,EAAE;MAAA,OAAMZ,OAAO,CAACE,QAAQ,CAACA,QAAQ,CAACb,MAAM,GAAG,CAAC,CAAC,CAAC;IAAA;IACzDwB,cAAc,EAAEpB;EAAc,EAEjC,EAEAY,MAAM,CAAChB,MAAM,GAAG,CAAC,IAChBC,8BAACoB,uBAAU;IACTT,GAAG,EAAEI,MAAM,CAACA,MAAM,CAAChB,MAAM,GAAG,CAAC,CAAC;IAC9Be,KAAK,EAAC,OAAO;IACbO,aAAa,EAAEN,MAAM,CAAChB,MAAM;IAC5BuB,WAAW,EAAE;MAAA,OAAMZ,OAAO,CAACK,MAAM,CAACA,MAAM,CAAChB,MAAM,GAAG,CAAC,CAAC,CAAC;IAAA;IACrDwB,cAAc,EAAEjB;EAAe,EAElC,CACI;AAEX;AAEA,IAAMY,MAAM,GAAGF,yBAAU,CAACQ,MAAM,CAAC;EAC/BL,IAAI,EAAE;IACJM,MAAM,EAAE,CAAC;IACTC,IAAI,EAAE,EAAE;IACRC,KAAK,EAAE,EAAE;IACTC,QAAQ,EAAE,UAAU;IACpBC,QAAQ,EAAE;;CAEb,CAAC;AAEF3B,kBAAeE,UAAU,CAAC0B,gBAAgB,CAAClC,mBAAmB,CAAC","names":["ErrorToastContainer","logs","isDisabled","length","react_1","ErrorToastStack","exports","onDismissWarns","LogBoxData","clearWarnings","onDismissErrors","clearErrors","setSelectedLog","index","openLog","log","warnings","filter","level","errors","react_native_1","style","styles","list","ErrorToast_1","totalLogCount","onPressOpen","onPressDismiss","create","bottom","left","right","position","maxWidth","withSubscription"],"sourceRoot":"","sources":["../../../src/error-overlay/toast/ErrorToastContainer.web.tsx"],"sourcesContent":["/**\n * Copyright (c) Evan Bacon.\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React, { useCallback, useMemo } from \"react\";\nimport { StyleSheet, View } from \"react-native\";\n\nimport { ErrorToast } from \"./ErrorToast\";\nimport * as LogBoxData from \"../Data/LogBoxData\";\nimport { LogBoxLog } from \"../Data/LogBoxLog\";\nimport { useLogs } from \"../Data/LogContext\";\nimport { useRejectionHandler } from \"../useRejectionHandler\";\n\nexport function ErrorToastContainer() {\n  useRejectionHandler();\n  const { logs, isDisabled } = useLogs();\n  if (!logs.length || isDisabled) {\n    return null;\n  }\n  return <ErrorToastStack logs={logs} />;\n}\n\nfunction ErrorToastStack({ logs }: { logs: LogBoxLog[] }) {\n  const onDismissWarns = useCallback(() => {\n    LogBoxData.clearWarnings();\n  }, []);\n\n  const onDismissErrors = useCallback(() => {\n    LogBoxData.clearErrors();\n  }, []);\n\n  const setSelectedLog = useCallback((index: number): void => {\n    LogBoxData.setSelectedLog(index);\n  }, []);\n\n  function openLog(log: LogBoxLog) {\n    let index = logs.length - 1;\n\n    // Stop at zero because if we don't find any log, we'll open the first log.\n    while (index > 0 && logs[index] !== log) {\n      index -= 1;\n    }\n    setSelectedLog(index);\n  }\n\n  const warnings = useMemo(\n    () => logs.filter((log) => log.level === \"warn\"),\n    [logs]\n  );\n\n  const errors = useMemo(\n    () => logs.filter((log) => log.level === \"error\" || log.level === \"fatal\"),\n    [logs]\n  );\n\n  return (\n    <View style={styles.list}>\n      {warnings.length > 0 && (\n        <ErrorToast\n          log={warnings[warnings.length - 1]}\n          level=\"warn\"\n          totalLogCount={warnings.length}\n          onPressOpen={() => openLog(warnings[warnings.length - 1])}\n          onPressDismiss={onDismissWarns}\n        />\n      )}\n\n      {errors.length > 0 && (\n        <ErrorToast\n          log={errors[errors.length - 1]}\n          level=\"error\"\n          totalLogCount={errors.length}\n          onPressOpen={() => openLog(errors[errors.length - 1])}\n          onPressDismiss={onDismissErrors}\n        />\n      )}\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  list: {\n    bottom: 6,\n    left: 10,\n    right: 10,\n    position: \"absolute\",\n    maxWidth: 320,\n  },\n});\n\nexport default LogBoxData.withSubscription(ErrorToastContainer);\n"]},"metadata":{},"sourceType":"script"}